<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>javascript每日练习6.8 | Boney_Chiang的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="JavaScript class-like objectshttp://www.codewars.com/kata/513e1e47c600c93cef000001
Lazily executing a functionhttp://www.codewars.com/kata/lazily-executing-a-function/javascript">
<meta property="og:type" content="article">
<meta property="og:title" content="javascript每日练习6.8">
<meta property="og:url" content="http://yoursite.com/2015/06/08/javascript每日练习6-8/index.html">
<meta property="og:site_name" content="Boney_Chiang的博客">
<meta property="og:description" content="JavaScript class-like objectshttp://www.codewars.com/kata/513e1e47c600c93cef000001
Lazily executing a functionhttp://www.codewars.com/kata/lazily-executing-a-function/javascript">
<meta property="og:updated_time" content="2015-06-09T02:47:37.756Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="javascript每日练习6.8">
<meta name="twitter:description" content="JavaScript class-like objectshttp://www.codewars.com/kata/513e1e47c600c93cef000001
Lazily executing a functionhttp://www.codewars.com/kata/lazily-executing-a-function/javascript">
  
    <link rel="alternative" href="/atom.xml" title="Boney_Chiang的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <script src="http://libs.baidu.com/jquery/1.9.0/jquery.js"></script>
    
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?a89f17fe60bb712e713ff1885c129ce5";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img lazy-src="/img/jiangzy.png" class="js-avatar">
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Boney Chiang</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="/#" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="/#" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="/#" title="rss">rss</a>
					        
								<a class="douban" target="_blank" href="/#" title="douban">douban</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Javascript/" style="font-size: 10px;">Javascript</a> <a href="/tags/Singleton/" style="font-size: 10px;">Singleton</a> <a href="/tags/codewar/" style="font-size: 10px;">codewar</a> <a href="/tags/codewars/" style="font-size: 20px;">codewars</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/javascript/" style="font-size: 20px;">javascript</a> <a href="/tags/maven/" style="font-size: 15px;">maven</a> <a href="/tags/spring/" style="font-size: 15px;">spring</a> <a href="/tags/日志/" style="font-size: 10px;">日志</a> <a href="/tags/设计模式/" style="font-size: 10px;">设计模式</a>
					</div>
				</section>
				
				
				

				
				
				<section class="switch-part switch-part3">
				
					<div id="js-aboutme">我是谁，我从哪里来，我到哪里去？我就是我，是颜色不一样的吃货…</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Boney Chiang</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="/img/jiangzy.png" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">Boney Chiang</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="/#" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="/#" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="/#" title="rss">rss</a>
			        
						<a class="douban" target="_blank" href="/#" title="douban">douban</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="post-javascript每日练习6-8" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/06/08/javascript每日练习6-8/" class="article-date">
  	<time datetime="2015-06-08T03:51:24.000Z" itemprop="datePublished">2015-06-08</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      javascript每日练习6.8
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/codewars/">codewars</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>
	</div>

        

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="JavaScript_class-like_objects">JavaScript class-like objects</h1><p><a href="http://www.codewars.com/kata/513e1e47c600c93cef000001" target="_blank" rel="external">http://www.codewars.com/kata/513e1e47c600c93cef000001</a></p>
<h1 id="Lazily_executing_a_function">Lazily executing a function</h1><p><a href="http://www.codewars.com/kata/lazily-executing-a-function/javascript" target="_blank" rel="external">http://www.codewars.com/kata/lazily-executing-a-function/javascript</a><br><a id="more"></a></p>
<h3 id="题目">题目</h3><p>Define a class named MyClass inside a namespace MyNamespace. The class constructor should accept a single string argument. It should also have a function named sayHello that returns the string passed into the constructor.</p>
<p>Example:</p>
<p>var myObject = new MyNamespace.MyClass(‘Hello!’);</p>
<p>var phrase = myObject.sayHello(); // phrase should be ‘Hello!’<br>The interesting part is that MyClass should only be accessible via the namespace and should not define any extra global variables. Code should not redefine an existing namespace, but should also function if the namespace is not previously defined.</p>
<h3 id="解析">解析</h3><p>这道题目的测试用例主要测试5个方面<br>A Namespaced Object<br>should define a class, MyClass, in the namespace MyNamespace</p>
<p>should not expose MyClass globally</p>
<p>should not overwrite existing objects in the namespace</p>
<p>should define a method in MyClass that returns ‘hello’</p>
<p>should not replace the existing namespace object</p>
<h3 id="测试用例">测试用例</h3><figure class="highlight javascript"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">describe(<span class="string">"A Namespaced Object"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  </span><br><span class="line">  it(<span class="string">"should define a class, MyClass, in the namespace MyNamespace"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    Test.expect(<span class="keyword">typeof</span> MyNamespace.MyClass == <span class="string">'function'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> myclass = <span class="keyword">new</span> MyNamespace.MyClass();</span><br><span class="line">    Test.expect(<span class="keyword">typeof</span> myclass == <span class="string">'object'</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">  it(<span class="string">"should not expose MyClass globally"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    Test.expect(<span class="keyword">typeof</span> MyClass == <span class="string">'undefined'</span>);</span><br><span class="line">    Test.expect(<span class="keyword">typeof</span> sayHello == <span class="string">'undefined'</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">  it(<span class="string">"should not overwrite existing objects in the namespace"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    Test.expect(MyNamespace.TestClass);</span><br><span class="line">    Test.expect((<span class="keyword">new</span> MyNamespace.TestClass2()).blue == <span class="string">'green'</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">  it(<span class="string">"should define a method in MyClass that returns 'hello'"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> obj = <span class="keyword">new</span> MyNamespace.MyClass(<span class="string">'hello'</span>);</span><br><span class="line">    Test.expect(obj.sayHello() == <span class="string">'hello'</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">  it(<span class="string">"should not replace the existing namespace object"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    Test.expect(OtherNamespace === MyNamespace);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="解答一">解答一</h3><figure class="highlight javascript"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="keyword">typeof</span> MyNamespace === <span class="literal">undefined</span>)</span><br><span class="line">    <span class="keyword">var</span> MyNamespace = &#123;&#125;;</span><br><span class="line">MyNamespace = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> MyClass = <span class="function"><span class="keyword">function</span> (<span class="params">param</span>)</span>&#123;</span><br><span class="line">         <span class="keyword">this</span>.param = param;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">    MyClass.prototype.sayHello = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.param;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;MyClass : MyClass&#125;;</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure>
<p>主要的问题是这种方式的namespace中不能再添加其他的方法了。<br>should not replace the existing namespace object<br>Value is not what was expected<br>should not overwrite existing objects in the namespace<br>Value is not what was expected<br>TypeError: undefined is not a function<br>       at Test.it<br>        at Test.describe</p>
<h3 id="解答二">解答二</h3><figure class="highlight javascript"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="keyword">typeof</span> MyNamespace === <span class="literal">undefined</span>)</span><br><span class="line">    <span class="keyword">var</span> MyNamespace = &#123;&#125;;</span><br><span class="line">MyNamespace.MyClass = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> MyClass = <span class="function"><span class="keyword">function</span> (<span class="params">param</span>)</span>&#123;</span><br><span class="line">         <span class="keyword">this</span>.param = param;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">    MyClass.sayHello = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.param;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> MyClass;</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure>
<p>这种解答在测试用例<br>should define a method in MyClass that returns ‘hello’<br>TypeError: Object [object Object] has no method ‘sayHello’<br>       at Test.it<br>        at Test.describe<br>中无法通过</p>
<h3 id="解答三">解答三</h3><figure class="highlight javascript"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="keyword">typeof</span> MyNamespace === <span class="literal">undefined</span>)</span><br><span class="line">    <span class="keyword">var</span> MyNamespace = &#123;&#125;;</span><br><span class="line">MyNamespace.MyClass = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> MyClass = <span class="function"><span class="keyword">function</span> (<span class="params">param</span>)</span>&#123;</span><br><span class="line">         <span class="keyword">this</span>.param = param;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">    MyClass.prototype.sayHello = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.param;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> MyClass;</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure>
<h3 id="解答4">解答4</h3><figure class="highlight javascript"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> MyNamespace == <span class="string">'undefined'</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> MyNamespace = &#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyNamespace.MyClass = <span class="function"><span class="keyword">function</span> (<span class="params">string</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.sayHello = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> string;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//or</span></span><br><span class="line"></span><br><span class="line">MyNamespace.MyClass = <span class="function"><span class="keyword">function</span> (<span class="params">string</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.string = string;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">this</span>.sayHello = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.string;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="题目-1">题目</h3><p>Description:</p>
<p>Deferring a function execution can sometimes save a lot of execution time in our programs by postponing the execution to the latest possible instant of time, when we’re sure that the time spent while executing it is worth it.</p>
<p>Write a method make_lazy that takes in a function (symbol for Ruby) and the arguments to the function and returns another function (lambda for Ruby) which when invoked, returns the result of the original function invoked with the supplied arguments.</p>
<p>For example:</p>
<p>Given a function add</p>
<p>function add (a, b) {<br>  return a + b;<br>}<br>One could make it lazy as:</p>
<p>var lazy_value = make_lazy(add, 2, 3);<br>The expression does not get evaluated at the moment, but only when you invoke lazy_value as:</p>
<p>lazy_value() =&gt; 5<br>The above invokation then performs the sum.</p>
<p>Please note: The functions that are passed to make_lazy may take one or more arguments and the number of arguments is not fixed.</p>
<figure class="highlight javascript"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">make_lazy</span>(<span class="params">fn</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> args = [].slice.call(<span class="built_in">arguments</span>,<span class="number">1</span>);</span><br><span class="line"><span class="comment">//arguments不是数组，所以没有slice方法</span></span><br><span class="line"><span class="comment">//    var args = arguments.slice(1);</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> fns.apply(<span class="keyword">this</span>,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> lazy_value = make_lazy(add,<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line"><span class="built_in">console</span>.log(lazy_value());</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> make_lazy = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// <span class="doctag"><span class="keyword">TODO</span></span>: implement this function</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">arguments</span>[<span class="number">0</span>].bind.apply(<span class="built_in">arguments</span>[<span class="number">0</span>],<span class="built_in">arguments</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> lazy_value = make_lazy(add,<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line"><span class="built_in">console</span>.log(lazy_value);</span><br></pre></td></tr></table></figure>
<h3 id="我的理解和收获">我的理解和收获</h3><ul>
<li>arguments对象<br>arguments对象的和Function对象是紧密相连的，每个函数都拥有argument属性。</li>
<li><p>call函数<br>a.call(b);<br>a对象的方法应用到b对象上(函数apply的意思正好说明符合这样理解：a对象应用到b对象上去)</p>
<p>a对象既然添加到b对象上了。那么b对象自然就拥有了a对象所有的内容。所有，b对象就继承了a对象了。</p>
</li>
<li>apply函数<br>a.call(b,2,3); ==&gt;  a.apply(b,[2,3]);//数组形式传入</li>
<li><p>bind函数<br>bind和call很相似，可接受的参数都分为两部分，且第一个参数都是作为执行时函数上下文中的this的对象。</p>
<ul>
<li>返回值<br>//使用bind是 返回改变上下文this后的函数<br>//使用call是 改变上下文this并执行函数</li>
<li>参数使用<br>call 是 把第二个及以后的参数作为f方法的实参传进去<br>而bind 虽说也是获取第二个及以后的参数用于之后方法的执行，但是f_Extend中传入的实参则是在bind中传入参数的基础上往后排的。<figure class="highlight javascript"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">a,b,c</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(a,b,c);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> f_Extend = f.bind(<span class="literal">null</span>,<span class="string">"extend_A"</span>)</span><br><span class="line"></span><br><span class="line">    f(<span class="string">"A"</span>,<span class="string">"B"</span>,<span class="string">"C"</span>)  <span class="comment">//这里会输出--&gt; A B C</span></span><br><span class="line"></span><br><span class="line">    f_Extend(<span class="string">"A"</span>,<span class="string">"B"</span>,<span class="string">"C"</span>)  <span class="comment">//这里会输出--&gt; extend_A A B</span></span><br><span class="line"></span><br><span class="line">    f_Extend(<span class="string">"B"</span>,<span class="string">"C"</span>)  <span class="comment">//这里会输出--&gt; extend_A B C</span></span><br><span class="line"></span><br><span class="line">    f.call(<span class="literal">null</span>,<span class="string">"extend_A"</span>) <span class="comment">//这里会输出--&gt; extend_A undefined undefined</span></span><br><span class="line">    <span class="comment">//这句代码相当于以下的操作</span></span><br><span class="line"><span class="keyword">var</span> f_Extend = f.bind(<span class="literal">null</span>,<span class="string">"extend_A"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//↓↓↓</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> f_Extend = <span class="function"><span class="keyword">function</span>(<span class="params">b,c</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> f.call(<span class="literal">null</span>,<span class="string">"extend_A"</span>,b,c);</span><br><span class="line">&#125;</span><br><span class="line">举一个应用场景：例如现在有一个方法 根据不同的文件类型进行相应的处理，通过bind 就可以创建出简化版的处理方法</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FileDealFunc</span>(<span class="params">type,url,callback</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(type==<span class="string">"txt"</span>)&#123;...&#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(type==<span class="string">"xml"</span>)&#123;...&#125;</span><br><span class="line">    .....</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> TxtDealFunc = FileDealFunc.bind(<span class="keyword">this</span>,<span class="string">"txt"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//这样使用的时候更方便一些</span></span><br><span class="line">FileDealFunc(<span class="string">"txt"</span>,XXURL,func);  <span class="comment">//原来</span></span><br><span class="line">TxtDealFunc(XXURL,func); <span class="comment">//现在</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>There is a difference between bind and apply. Bind takes the arguments and apply gets a scope and an array with the arguments.</p>
</li>
</ul>
<p>To make this more clear. This would be the same:</p>
<p>o.bind(1,2,3);</p>
<p>o.apply(o, [1,2,3]);</p>
<p>o isn’t a function, so it doesn’t have an .apply() method. If you were thinking of the ECMAScript .bind(), that one takes a calling context argument just like .apply(), but individual arguments like .call(). –  squint Jul 5 ‘12 at 2:01</p>
<h3 id="来自codewar的解释">来自codewar的解释</h3><p>The sneaky trick in this one is that we are applying the bind function, not the input fn as you probably did.</p>
<p>Let’s break it down:</p>
<p>fn.bind( scope, arg1, arg2, … )</p>
<p>bind, when called on a function f, returns a new function g that calls f with the provided scope, and optionally the provided arguments. It can be implemented like this:</p>
<p>Function.prototype.bind = function(scope) {<br>    var fn = this,<br>        // arguments here are the original arguments<br>        args = Array.prototype.slice(arguments, 1);<br>    return function() {<br>        // this arguments refers to any additional arguments<br>        return fn.apply(scope, args.concat(arguments));<br>    };<br>};<br>This allows us to call g at a later time, and guarantee that it will apply to scope, as well as always have any arguments we provided ahead of time.</p>
<p>fn.apply(scope, argArray)</p>
<p>apply, when called on a function f, executes the function f as if it was called on the given scope, and passed in the provided args.</p>
<p>So, these are equivilant</p>
<p>fn.apply(scope, [1, 2, 3]);<br>scope.fn(1, 2, 3); // assuming <code>fn</code> exists on the scope object<br>fn.bind.apply(fn, args)</p>
<p>This calls apply on the bind function, because we have unknown values we want to bind to the original fn.</p>
<p>If we knew the arguments, then these would be equivilant:</p>
<p>fn.bind.apply(fn, [fn, 1, 2, 3]);<br>//             ^    ^<br>//             |    ‘— this is the scope for bind!<br>//             ‘— this is the scope for apply<br>fn.bind(fn, 1, 2, 3);<br>//       ^<br>//       ‘— this is the scope for bind<br>This is why passing in the extra fn in arguments is OK. In either case, what is returned is a new function g, that will call fn with the arguments 1, 2, 3. By using apply, we can pass in the original arguments, without worrying about them.</p>
<p>And that’s basically it. We’re using the built-in JavaScript function behavior to dynamically create a new function which will call the original function with the provided arguments.</p>
<h3 id="其他解法">其他解法</h3><figure class="highlight javascript"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> make_lazy = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> lazy = <span class="built_in">Array</span>.prototype.shift.call(<span class="built_in">arguments</span>).apply(<span class="built_in">arguments</span>.callee,<span class="built_in">arguments</span>); </span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span>  lazy; &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Array.prototyep.shift,删除数组的第一个元素，并返回该元素</span></span><br></pre></td></tr></table></figure>
      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/06/10/javascript每日练习6-10/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          javascript每日练习6-10
        
      </div>
    </a>
  
  
    <a href="/2015/06/04/Javascript设计模式/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">Javascript设计模式</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>


<div class="share">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">分享到：</span>
		<a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
		<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>



<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="javascript每日练习6-8" data-title="javascript每日练习6.8" data-url="http://yoursite.com/2015/06/08/javascript每日练习6-8/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"yimoqingyuan"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>



</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2015 Boney Chiang
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/mobile.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>





<! -- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  </div>
</body>
</html>